<!DOCTYPE html>
<!--

  [Please Enter New Password]

  fortnight

  [Error: Password is Two Week]

-->
<html lang="en">
  <head>
    <title>Working with Whitespace</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta name="author" content="Jezen Thomas">
    <meta property="og:title" content="Working with Whitespace">
    <meta property="og:description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta property="og:type" content="article">
    <meta property="og:image" content="/static/img/prestiz.jpg">
    <meta property="og:site_name" content="Jezen Thomas">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="jezenthomas.com">
    <meta name="twitter:title" content="Working with Whitespace">
    <meta name="twitter:description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta name="twitter:image" content="/static/img/prestiz.jpg">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/gif" href="/doom.gif">
    <link rel="stylesheet" type="text/css" href="/css/b38e08172cd4908c1dd649e302de1a33.css">
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS feed">
  </head>
  <body>
    <header>
  <a class="portrait" href="/">
    <img alt="Jezen Thomas" src="/static/img/jgt.jpg" loading="lazy">
  </a>
  <h1 class="site-title">
    <a href="/">Jezen Thomas</a>
  </h1>
  <p class="bio">
    CTO &amp; Co-Founder at Supercede.
  </p>
</header>

    <div id="main"><div class="container">
  <article>
    <h1 class="post-title">Working with Whitespace</h1>
    <div class="post-meta">
      <p class="post-date">
        December 21<sup>st</sup>, 2014
        
        | Göteborg, Sweden
        
      </p>
    </div>
    <p>Any thought-leadering piece, any conference talk, any tweet from an outspoken
nerd; if there’s one common theme — one opinion for which there is no
counterargument — it’s that there’s no excuse for careless, messy whitespace in
a codebase. Here’s how I handle whitespace with my weapon of choice, Vim.</p>
<h2 id="always-show-whitespace">Always show whitespace</h2>
<p>Here are a couple of lines that should be in everyone’s <code>.vimrc</code>. The first
displays invisible characters, and the second defines which symbols should be
used to represent the different kinds of invisible characters. I mostly borrowed
the second line from Steve Losh’s <a href="https://bitbucket.org/sjl/dotfiles/src/603bb1ae9da27c6e08ab115df1cb5d8f6a1442c3/vim/vimrc?at=default">vimrc</a>.</p>
<div class="highlight"><pre><span></span>set list
set lcs=tab:▸\ ,extends:❯,precedes:❮,nbsp:.,trail:·,eol:¬
</pre></div>

<h2 id="cleaning-trailing-whitespace">Cleaning trailing whitespace</h2>
<p>This is another gem I found in Steve Losh’s vimrc. I don’t care to learn exactly
how it works just yet. At the moment, I have it mapped to <code>&lt;leader&gt;w</code>, but it
might be a good idea to automatically run the command anytime you write to a
file. I think it really depends on how you feel this will affect your version
control workflow.</p>
<div class="highlight"><pre><span></span>nnoremap &lt;leader&gt;w mz:%s/\s\+$//&lt;cr&gt;:let @/=''&lt;cr&gt;`z
</pre></div>

<h2 id="normalising-blank-lines">Normalising blank lines</h2>
<p>Unless you’re drawing ASCII art, I don’t think there’s ever a good reason to
have contiguous blank lines. Any group of rules or logic in a codebase should be
separated by one single blank line, not more. Before I took the nosedive into
Vim and Unix, I would clean these blank lines manually or force myself to ignore
the disorder. Neither of those are any fun.</p>
<p>Vim provides us with <em>filters</em>, which pipe the contents of a buffer to some
external Unix command and read the results of the command back into the buffer,
replacing the original text. If you pipe a file to <code>cat -s</code>, it gives it back to
you with the blank lines normalised. To do this straight from Vim:</p>
<div class="highlight"><pre><span></span>:%!cat -s
</pre></div>

<p>The percent symbol references the entire buffer (which means filters also work
with ranges), and the bang tells Vim to drop to the shell.</p>

  </article>
</div>
</div>
    <footer>&copy; 2024 Jezen Thomas</footer>


    <script type="text/javascript">
      [].slice.call(document.querySelectorAll('.footnote-ref sup')).forEach(function(el) {
        var content = el.innerText;
        el.innerText = '[' + content + ']';
      })
    </script>
  </body>
</html>
