<!DOCTYPE html>
<!--

  [Please Enter New Password]

  fortnight

  [Error: Password is Two Week]

-->
<html lang="en">
  <head>
    <title>Working with Whitespace</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta name="author" content="Jezen Thomas">
    <meta property="og:title" content="Working with Whitespace">
    <meta property="og:description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta property="og:type" content="article">
    <meta property="og:image" content="/static/img/prestiz.jpg">
    <meta property="og:site_name" content="Jezen Thomas">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="jezenthomas.com">
    <meta name="twitter:title" content="Working with Whitespace">
    <meta name="twitter:description" content="A couple of tips for weeding out trailing whitespace and unnecessary blank lines in Vim.">
    <meta name="twitter:image" content="/static/img/prestiz.jpg">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msvalidate.01" content="0BFF5F9B2745D86F899A8E0A7FB7BCE0">
    <link rel="icon" type="image/gif" href="/doom.gif">
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/default.css">
    <link rel="stylesheet" type="text/css" href="/css/header.css">
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/spirograph.css">
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS feed">
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="vYwTMxlPcZFRl0z1O6Ai6A" async></script>
    <script src="https://cdn.usefathom.com/script.js" data-site="OTTAMRJZ" defer></script>

    <!-- htmlqa - simple website validation and accessibility monitoring -->
    <script src="https://www.htmlqa.com/send/klq9mqrJ" defer></script>
    <!-- / htmlqa -->
  </head>
  <body>
    <header>
  <a class="portrait" href="/">
    <img width="80" height="80" alt="Jezen Thomas" src="/static/img/jgt.jpg" loading="lazy">
  </a>
  <h1 class="site-title">
    <a href="/">Jezen Thomas</a>
  </h1>
  <p class="bio">
    CTO &amp; Co-Founder at Supercede.
  </p>
</header>

    <div id="main"><div class="container">
  <article>
    <h1 class="post-title">Working with Whitespace</h1>
    <div class="post-meta">
      <p class="post-date">
        December 21<sup>st</sup>, 2014
        
        | Göteborg, Sweden
        
      </p>
      <a class="rss" href="/feed.xml">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
  </svg>
  Subscribe
</a>

    </div>
    <p>Any thought-leadering piece, any conference talk, any tweet from an outspoken
nerd; if there’s one common theme — one opinion for which there is no
counterargument — it’s that there’s no excuse for careless, messy whitespace in
a codebase. Here’s how I handle whitespace with my weapon of choice, Vim.</p>
<h2 id="always-show-whitespace">Always show whitespace</h2>
<p>Here are a couple of lines that should be in everyone’s <code>.vimrc</code>. The first
displays invisible characters, and the second defines which symbols should be
used to represent the different kinds of invisible characters. I mostly borrowed
the second line from Steve Losh’s <a href="https://bitbucket.org/sjl/dotfiles/src/603bb1ae9da27c6e08ab115df1cb5d8f6a1442c3/vim/vimrc?at=default">vimrc</a>.</p>
<div class="highlight"><pre><span></span>set list
set lcs=tab:▸\ ,extends:❯,precedes:❮,nbsp:.,trail:·,eol:¬
</pre></div>

<h2 id="cleaning-trailing-whitespace">Cleaning trailing whitespace</h2>
<p>This is another gem I found in Steve Losh’s vimrc. I don’t care to learn exactly
how it works just yet. At the moment, I have it mapped to <code>&lt;leader&gt;w</code>, but it
might be a good idea to automatically run the command anytime you write to a
file. I think it really depends on how you feel this will affect your version
control workflow.</p>
<div class="highlight"><pre><span></span>nnoremap &lt;leader&gt;w mz:%s/\s\+$//&lt;cr&gt;:let @/=''&lt;cr&gt;`z
</pre></div>

<h2 id="normalising-blank-lines">Normalising blank lines</h2>
<p>Unless you’re drawing ASCII art, I don’t think there’s ever a good reason to
have contiguous blank lines. Any group of rules or logic in a codebase should be
separated by one single blank line, not more. Before I took the nosedive into
Vim and Unix, I would clean these blank lines manually or force myself to ignore
the disorder. Neither of those are any fun.</p>
<p>Vim provides us with <em>filters</em>, which pipe the contents of a buffer to some
external Unix command and read the results of the command back into the buffer,
replacing the original text. If you pipe a file to <code>cat -s</code>, it gives it back to
you with the blank lines normalised. To do this straight from Vim:</p>
<div class="highlight"><pre><span></span>:%!cat -s
</pre></div>

<p>The percent symbol references the entire buffer (which means filters also work
with ranges), and the bang tells Vim to drop to the shell.</p>

  </article>
</div>
</div>
    <footer>
  <p>&copy; 2025 Jezen Thomas</p>
  <a class="rss" href="/feed.xml">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
  </svg>
  Subscribe
</a>

</footer>


    <script>
      [].slice.call(document.querySelectorAll('.footnote-ref sup')).forEach(function(el) {
        var content = el.innerText;
        el.innerText = '[' + content + ']';
      })
    </script>
  </body>
</html>
