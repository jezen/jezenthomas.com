<!DOCTYPE html>
<!--

  [Please Enter New Password]

  fortnight

  [Error: Password is Two Week]

-->
<html lang="en">
  <head>
    <title>Rich Hickey Doesn't Know Types</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Typing preferences are one thing, but the implication that parametricity is effectively useless is just a bridge too far.">
    <meta name="author" content="Jezen Thomas">
    <meta property="og:title" content="Rich Hickey Doesn't Know Types">
    <meta property="og:description" content="Typing preferences are one thing, but the implication that parametricity is effectively useless is just a bridge too far.">
    <meta property="og:type" content="article">
    <meta property="og:image" content="/static/img/prestiz.jpg">
    <meta property="og:site_name" content="Jezen Thomas">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="jezenthomas.com">
    <meta name="twitter:title" content="Rich Hickey Doesn't Know Types">
    <meta name="twitter:description" content="Typing preferences are one thing, but the implication that parametricity is effectively useless is just a bridge too far.">
    <meta name="twitter:image" content="/static/img/prestiz.jpg">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msvalidate.01" content="0BFF5F9B2745D86F899A8E0A7FB7BCE0">
    <link rel="icon" type="image/gif" href="/doom.gif">
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/default.css">
    <link rel="stylesheet" type="text/css" href="/css/header.css">
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    <link rel="stylesheet" type="text/css" href="/css/spirograph.css">
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS feed">
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="vYwTMxlPcZFRl0z1O6Ai6A" async></script>
    <script src="https://cdn.usefathom.com/script.js" data-site="OTTAMRJZ" defer></script>

    <!-- htmlqa - simple website validation and accessibility monitoring -->
    <script src="https://www.htmlqa.com/send/mBvYEvKM" defer></script>
    <!-- / htmlqa -->
  </head>
  <body>
    <div id="main"><header>
  <a class="portrait" href="/">
    <img width="80" height="80" alt="Jezen Thomas" src="/static/img/jgt.jpg" loading="lazy">
  </a>
  <h1 class="site-title">
    <a href="/">Jezen Thomas</a>
  </h1>
  <p class="bio">
    CTO &amp; Co-Founder at Supercede.
  </p>
</header>


<div class="container">
  <article>
    <h1 class="post-title">Rich Hickey Doesn't Know Types</h1>
    <div class="post-meta">
      <p class="post-date">
        April  9<sup>th</sup>, 2019
        
        | Sopot, Poland
        
      </p>
      <a class="rss" href="/feed.xml">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
  </svg>
  Subscribe
</a>

    </div>
    <p>Clojure inventor Rich Hickey argues in one of his talks that:</p>
<blockquote>
<p><code>a -&gt; a</code>; <code>[a] -&gt; [a]</code>; It means nothing! It tells you <em>nothing</em>!</p>
</blockquote>
<p>— Rich Hickey, <a href="https://youtu.be/2V1FtfBDsLU?t=4020">Effective Programs</a>.</p>
<p>If we take him to mean “<code>a -&gt; a</code>”, this is actually one of the simplest ways to
understand parametricity.</p>
<p>At first glance, it looks like a function of type <code>a -&gt; a</code> could do anything.
But parametricity rules that out. If you pass in a <code>1</code>, it can’t return <code>2</code> —
because the function must also work for <em>any other type</em>, not just numbers.
There’s no general “+1” operation across all types. Likewise, concatenation
only works for types with the right structure. In fact, the only lawful
implementation is the identity function:</p>
<div class="highlight"><pre><span></span><span class="nf">id</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="nf">id</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">x</span>
</pre></div>

<p>The signature also tells us there are no effects involved: there’s no <code>IO</code>
present, so the function can’t read from or write to the outside world.</p>
<p>Now consider <code>[a] -&gt; [a]</code>. Yes, technically there are infinitely many
implementations (<code>a</code>, <code>a ++ a</code>, <code>a ++ a ++ a</code>, …), but they’re still highly
constrained. You can reverse a list, drop elements, take elements — but you
cannot inspect or manufacture new <code>a</code> values. Parametricity tells us a
great deal.</p>
<p>A true shuffle would need a source of randomness, <em>e.g.</em>:</p>
<div class="highlight"><pre><span></span><span class="nf">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Seed</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="c1">-- pass a seed</span>
<span class="c1">-- or</span>
<span class="nf">f</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">IO</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w">      </span><span class="c1">-- obtain randomness in IO</span>
</pre></div>

<p>This is the opposite of “nothing”: the signatures rule out far more than they
permit, and those exclusions are exactly what make them informative.</p>
<p>As Kris Jenkins put it in <a href="https://vimeo.com/302682323">Communicating in Types</a>:</p>
<blockquote>
<p>When you have a type error — and you <em>always</em> get a type error — the question
is whether you get it from QA, or your users, or your compiler.</p>
</blockquote>
<p>Type systems like Haskell’s aren’t a panacea, and there are <em>some</em> things that
a language with a dynamic type system can do that are harder to achieve in
Haskell (though what this means in the context of a business is a separate
discussion). But dismissing these general types as uninformative overlooks the
guarantees parametricity provides.</p>


    <nav class="post-nav">
      
        <a class="prev" href="/2019/01/you-think-css-in-js-is-bad/">
          ← Previous
          <div class="adjacent-post-title">You Think CSS-in-JS is Bad?</div>
        </a>
      
      
        <a class="next" href="/2019/09/implementing-csp-in-yesod/">
          Next →
          <div class="adjacent-post-title">Implementing a Content Security Policy in Yesod</div>
        </a>
      
    </nav>
  </article>
</div>

<footer>
  <p>&copy; 2025 Jezen Thomas</p>
  <a class="rss" href="/feed.xml">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
  </svg>
  Subscribe
</a>

</footer>

</div>

    <script>
      [].slice.call(document.querySelectorAll('.footnote-ref sup')).forEach(function(el) {
        var content = el.innerText;
        el.innerText = '[' + content + ']';
      })
    </script>
  </body>
</html>
